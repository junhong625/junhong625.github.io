---
layout : post
title : '[빅데이터를 지탱하는 기술] 2-3 애드 혹 분석과 시각화 도구'
subtitle : '[빅데이터를 지탱하는 기술] 정리'
gh-repo: junhong625/Study
gh-badge: [star, fork, follow]
tags : [빅데이터를 지탱하는 기술, Study]
comments: true
---

# 2-3 애드 혹 분석과 시각화 도구
- - - 

## Jupyter Notebook에 의한 애드 혹 분석
### - 노트북에 분석 과정 기록하기
- **애드 혹 분석** : 특정한 문제나 일을 해결하기 위해 일회성으로 진행하는 데이터 분석
    - 애드 혹 분석은 모든 데이터 분석의 기초가 됨
    - 애드 혹 분석에 대화형 실행 환경이 자주 사용됨
- **Jupyter Notebook** : 오픈 소스 대화형 도구로 Python, Ruby, R 언어 등의 스크립트 언어를 사용하여 실행
    - 로컬 호스트에서 기동
    - 웹 브라우저로 실행하여 사용할 언어를 선택하여 새 노트북을 생성
    - 노트북 안에서는 스크립트와 외부 명령어를 실행할 수 있음
    - 실행 내용은 모두 기록되며 편집하거나 재실행할 수 있음
    - 마크다운 형식으로 입력이 가능하며 사진이나 수식을 포함할 수도 있음
- 애드 혹 분석으로 크로스 집계의 결과를 보고 싶은 경우에는 스프레드시트와 BI 도구를 시작할 필요도 없이 노트북 안에서 실행 가능
<br>
<br>

### 노트북 내에서의 시각화
- **Matplotlib** : 과학 기술 계산 분야에서 사용되는 시각화 라이브러리
    - 그래프를 파이썬을 사용하여 생성
    - 시각화를 위해서는 프로그래밍이 필요하기 때문에 처음에는 시간이 오래 걸리지민 유사한 그래프를 몇 번이고 다시 만드는 경우에 유용
- 마우스 조작만으로 대화형 차트를 만들고 싶을 때는 노트북을 사용하기 보다는 스프레드시트 및 BI 도구 등의 시각화 도구로 전환하는 편이 좋음
    - 데이터 프레임을 시각화 도구에 전달할 때는 CSV 파일로 저장해서 로드
<br>
<br>

### 노트북에 의한 워크플로 - 일련의 태스크를 한꺼번에 실행하기
- 노트북은 '간이적인 워크플로의 실행'에도 사용할 수 있음
    - 가끔 수작업으로 실행하기만 하는 워크플로라면 이것으로 충분
    1. 일련의 태스크를 노트북에 정리하고
    2. 메뉴의 [Kernel]에서 [Restart & Run All]을 선택하면 모든 셀이 처음부터 순서대로 실행 됨
- 노트북 안에서는 `느낌표(!)`로 명령어를 시작해서 모든 외부 명령어를 실행할 수 있다.
    - 특별한 프로그래밍 지식이 없어도 모든 데이터 처리를 하나의 노트북 형태로 정리 가능
    - ex) In [1]: !cp source.csv target.csv
- 수작업에 의한 애드 혹 분석과 정기적인 데이터 처리 자동화에는 필요한 지식도 도구도 전혀 다름
- 수작업이 번거롭다고 생각될 때 자동화를 해도 늦지 않음
<br>
<br>

## 대시보드 도구
### - 정기적으로 집계 결과를 시각화하기
- 정기적으로 쿼리를 실행해 보고서를 작성하거나 주요 그래프를 모아서 대시보드를 작성할 때 BI 도구를 사용할 수 있음
    - 하지만 대시보드를 만드는 것이 목적이라면 특화된 전용 도구가 자주 사용됨 ex) Redash, Superset, Kibana 등
- 대시보드 도구와 BI 도구의 차이는 그다지 엄밀하지는 않음
    - 대시보드 도구 : 새로운 그래프를 쉽게 추가할 수 있는 것이 중요 -> 정해진 지표의 일상적인 변화를 모니터링 하고 싶은 경우에 적합
    -  BI 도구 : 대화형 데이터 탐색이 중요 -> 그래프를 클릭하여 상세한 표시로 전환하거나 집계에 기반이 되는 로우 데이터를 표시하고 싶은 경우에 적합
<br>
<br>

### Redash - SQL에 의한 쿼리의 실행 결과를 그대로 시각화
- **Redash** : 다수의 데이터 소스에 대응하는 파이썬으로 만든 대시보드 도구
    - SQL에 의한 쿼리의 실행 결과를 그대로 시각화하는 데에 적합
    - Redash에 의한 대시보드 작성은 직관적이며 3단계로 완성함
        1. 데이터 소스를 등록한다.
        2. 쿼리를 실행해서 표와 그래프를 만든다.
        3. 그래프를 대시보드에 추가한다.
    - 하나의 쿼리가 하나 또는 여러 그래프에 대응함
    - 등록한 쿼리는 정기적으로 실행되어 Redash 데이터베이스에 저장됨
        - Hive에서 한 시간이 걸리는 쿼리가 있다 해도 마지막으로 실행된 집계 결과를 표시할 뿐이기에 대시보드의 표시가 즉시 이루어짐
        - 따라서 별도의 데이터 마트를 만들 필요 X
    - Redash의 구조는 알기 쉽고 SQL로 쿼리를 작성해서 그래프로 만들거나 결과를 팀 내에서 공유하기 위한 콘솔로 우수함
    - 반면 BI 도구만큼 대량의 데이터를 처리할 수 없음
    - Redash는 그래프를 만드는데 필요한 수십 수백 행 정도의 레코드만 반환함
        - Redash에서는 그래프의 수만큼 쿼리를 실행하게 되고, 대시보드가 증가함에 따라 백엔드 데이터베이스의 부하가 높아짐
    - 집필시점에는 Redash는 대화형 대시보드를 만들 수 없었음
<br>
<br>

### Superset - 화면상에서 마우스 조작만으로 그래프를 만들기
- **Superset(수퍼셋)** : 대화형 대시보드를 작성하기 위한 파이썬으로 만든 웹 애플리케이션
    - 기본적인 아이디어는 BI 도구와 비슷해 마우스 조작으로 그래프를 만드는 것이 기본
    - 대화형 시각화를 가정하고 있기에 데이터 소스에 의한 집계를 몇 초 내에 완료할 것으로 판단됨
    - 내장 스토리지 시스템을 갖고 있지 않아 데이터의 집계는 외부 데이터 저장소에 의존
        - 시계열 데이터에 대응한 열 지향 스토리지인 'Druid'를 표준으로 지원
        - 스트리밍 형의 데이터 전송과 조합하여 실시간 정보를 취급할 수 있음
        - 'Druid'를 이용하지 않을 경우 지연이 적은 RDB나 MPP DB를 조합시켜 고속화해야 함
    - BI 도구와 마찬가지로 시각화를 위한 데이터 마트를 먼저 만드는 것이 기본
    - 'Druid'는 집계 시에 테이블을 결합할 수 없기에 데이터를 미리 결합해두어야 함
    - 워크플로 관리 도구도 함께 검토 필요
<br>
<br>

### Kibana - Elasticsearch의 프런트 엔드에서 실시간으로 작성
- **Kibana** : 자바스크립트로 만들어진 대화식 시각화 도구
    - 실시간 대시보드를 만들 목적으로 이용 됨
    - 'Elasticsearch'의 프런트 엔드로 개발되었기에 'Elasticsearch'도입이 필수
    - Kibana는 Elasticsearch 이외의 데이터 소스에는 대응하고 있지 않아 시각화 하려는 데이터는 모두 Elasticsearch에 저장해야 함
    - **Elasticsearch** : **전체 텍스트 검색**에 대응한 데이터 스토어
        - 키워드로 텍스트 데이터를 검색하려는 경우에 매우 적합함
    - 검색 조건에 맞는 데이터를 빠르게 시각화하는 데에 적합한 도구
<br>
<br>

## BI 도구
### - 대화적인 대시보드
- **BI 도구** : 장기적인 데이터의 추이를 시각화하거나 집계의 조건을 세부적으로 바꿀 수 있는 대시보드에 적합
    - 이미 있는 데이터를 가져올 뿐만 아니라 시간을 들여 데이터를 분석하기 쉽도록 가공하는 일이 자주 있음
        - 즉, 시각화에 적합한 데이터 마트를 만들어 읽고 쓰는 것을 전제로 함
    - 하나 또는 소수의 데이터 소스에서 다수의 그래프를 만드는 경우가 종종 있음
        - 즉, 집계의 축을 어떻게 취하느냐에 따라 수많은 견해가 생김
    - 하나의 대시보드에는 표시할 수 있는 정보량에 한계가 있기 때문에 몇 가지 중요 화면을 먼저 만든 다음 화면상에서 집계 조건을 바꿀 수 있도록 함
    - 무엇을 보고 싶은지에 따라 다수의 대시보드를 만드는데 거기에 표시되는 데이터는 화면상에서 추려낼 수 있도록 디자인
<br>
<br>

### 하나의 데이터를 다각적으로 분석하기
- 대화형 대시보드를 만들기 위해서는 바탕이 되는 데이터를 모두 포함하는 하나의 테이블을 작성 -> 테이블에서 다수의 대시보드를 생성
- BI 도구로 시각화할 수 있는 내용을 늘리기 위해서는 데이터 웨어하우스에 이미 존재하는 테이블을 사용하는 것이 아닌 배치 처리에 의한 데이터 마트 작성이 필요
    - 알고 싶은 것이 늘어날 때마다 데이터 마트에 테이블을 만들고 파생된 다수의 대시보드가 생겨나는 것이 BI 도구의 시각화 과정
<br>
<img hieght=400 src="https://user-images.githubusercontent.com/83000975/165491765-7a466285-9f43-47b1-9c8f-bb55de892075.jpeg">

<sub><b>[하나의 테이블에서 다수의 대시보드 작성하기]</b></sub>
